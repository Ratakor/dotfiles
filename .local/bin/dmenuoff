#!/bin/sh
# menu for shutdown or lock
# require nopass for poweroff and reboot and my build of dmenu for -hf

red=$(xrdb -query | awk '/color1:/ { print $2 }')
cyan=$(xrdb -query | awk '/color6:/ { print $2 }')

[ -z "$red" ] && red='#ff5555'
[ -z "$cyan" ] && cyan='#8be9fd'

QUERY=$(printf 'no\nlock\npoweroff\nreboot' | dmenu -i -sb "$red" -hf "$cyan" -p 'Shutdown?')
ROOTCMD="${ROOTCMD:-$(command -v doas || command -v sudo)}"

case "$QUERY" in
"lock")
	slock ;;
"poweroff")
	"$ROOTCMD" poweroff ;;
"reboot")
	"$ROOTCMD" reboot ;;
esac
