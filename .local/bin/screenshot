#!/bin/sh

OUTPUT="$XDG_PICTURES_DIR/screenshots/$(date '+%d-%m-%Y_%H:%M:%S').png"
XCLIPCMD="xclip -sel clip -t image/png"

[ "$1" = "-c" ] &&
	case "$(printf "copy select\ncopy screen" | dmenu -i -p "Screenshot ")" in
	    "copy select") maim -u -s | $XCLIPCMD ;;
	    "copy screen") maim -q -d 0.5 | $XCLIPCMD ;;
	esac ||
	case "$(printf "save select\nsave screen" | dmenu -i -p "Screenshot ")" in
	    "save select") maim -u -s "$OUTPUT" ;;
	    "save screen")  maim -q -d 0.5 "$OUTPUT" ;;
	esac
