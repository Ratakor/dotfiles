#!/bin/sh
#                                                         ..      ...
#    author:  ratakor <ratakor@disroot.org>            :~"8888x :"%888x
#                                                     8    8888Xf  8888>
#    created: Sat, 06 May 2023 20:07:24 +0200        X88x. ?8888k  8888X
#    updated: Sat, 06 May 2023 20:12:59 +0200        '8888L'8888X  '%88X
#                                                     "888X 8888X:xnHH(``
#    description:                                       ?8~ 8888X X8888
#    change the letter shown here ->                  -~`   8888> X8888
#    with the first argument or the first             :H8x  8888  X8888
#    letter of $USER                                  8888> 888~  X8888
#                                                     48"` '8*~   `8888!`
#                                                      ^-==""      `""

HEADER=${XDG_CONFIG_HOME:-$HOME/.config}/nvim/header.vim
SRC="https://ratakor.com/letters/${1:-$(printf %.1s "$USER")}"

sed -i '135,$d' "$HEADER"
curl -s "$SRC" | sed -e 's/"/\\"/g'\
	-e 's/^/              \\"/'\
	-e 's/$/",/' >> "$HEADER"
printf '              \\]\n' >> "$HEADER"
